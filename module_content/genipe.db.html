

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>genipe.db package &#8212; genipe 1.5.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="genipe.formats package" href="genipe.formats.html" />
    <link rel="prev" title="genipe.config package" href="genipe.config.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="genipe.formats.html" title="genipe.formats package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="genipe.config.html" title="genipe.config package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">genipe 1.5.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../implementation.html" >Implementation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="modules.html" >genipe</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="genipe.html" accesskey="U">genipe package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">genipe.db package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="genipe-db-package">
<h1>genipe.db package<a class="headerlink" href="#genipe-db-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-genipe.db">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-genipe.db" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-genipe.db.utils">
<span id="genipe-db-utils-module"></span><h2>genipe.db.utils module<a class="headerlink" href="#module-genipe.db.utils" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="genipe.db.utils.check_task_completion">
<code class="sig-prename descclassname">genipe.db.utils.</code><code class="sig-name descname">check_task_completion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task_id</span></em>, <em class="sig-param"><span class="n">db_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/genipe/db/utils.html#check_task_completion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#genipe.db.utils.check_task_completion" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the task exists and if it’s completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the ID of the task</p></li>
<li><p><strong>db_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the name of the database (usually a file)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">True</span></code> if the task exists <strong>and</strong> is completed, <code class="docutils literal notranslate"><span class="pre">False</span></code></dt><dd><p>otherwise</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A task is completed if the column <code class="docutils literal notranslate"><span class="pre">completed</span></code> equals 1. It is not
completed otherwise.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="genipe.db.utils.create_task_db">
<code class="sig-prename descclassname">genipe.db.utils.</code><code class="sig-name descname">create_task_db</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out_dir</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/genipe/db/utils.html#create_task_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#genipe.db.utils.create_task_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a task DB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the directory where the DB will be saved</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the name of the file containing the DB</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p>
</dd>
</dl>
<p>A SQLITE database will be created in the <code class="docutils literal notranslate"><span class="pre">out_dir</span></code> directory (with the
name <code class="docutils literal notranslate"><span class="pre">tasks.db</span></code>. The <code class="docutils literal notranslate"><span class="pre">genipe_task</span></code> table is automatically created.</p>
</dd></dl>

<dl class="py function">
<dt id="genipe.db.utils.create_task_entry">
<code class="sig-prename descclassname">genipe.db.utils.</code><code class="sig-name descname">create_task_entry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task_id</span></em>, <em class="sig-param"><span class="n">db_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/genipe/db/utils.html#create_task_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#genipe.db.utils.create_task_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates (or updates) a task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the ID of the task</p></li>
<li><p><strong>db_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the name of the database (usually a file)</p></li>
</ul>
</dd>
</dl>
<p>If the task ID doesn’t exist in the DB, a new one will be created with the
current time as launch and start time.</p>
<p>If the task ID already exist, it is presumed that the task will be
relaunched, hence the database entry is updated to the current time (for
launch and start time) and <code class="docutils literal notranslate"><span class="pre">completed</span></code> is set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt id="genipe.db.utils.get_all_runtimes">
<code class="sig-prename descclassname">genipe.db.utils.</code><code class="sig-name descname">get_all_runtimes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/genipe/db/utils.html#get_all_runtimes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#genipe.db.utils.get_all_runtimes" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all tasks execution time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>db_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the name of the DB (usually a file)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the execution time (seconds) of all the tasks in the database</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
<p>This function returns a dictionary of task ID (keys) pointing to execution
time (in second) (int).</p>
</dd></dl>

<dl class="py function">
<dt id="genipe.db.utils.get_task_runtime">
<code class="sig-prename descclassname">genipe.db.utils.</code><code class="sig-name descname">get_task_runtime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task_id</span></em>, <em class="sig-param"><span class="n">db_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/genipe/db/utils.html#get_task_runtime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#genipe.db.utils.get_task_runtime" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the task run time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the ID of the task</p></li>
<li><p><strong>db_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the name of the DB (usually a file)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the execution time of the task (in seconds)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="genipe.db.utils.mark_drmaa_task_completed">
<code class="sig-prename descclassname">genipe.db.utils.</code><code class="sig-name descname">mark_drmaa_task_completed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task_id</span></em>, <em class="sig-param"><span class="n">launch_time</span></em>, <em class="sig-param"><span class="n">start_time</span></em>, <em class="sig-param"><span class="n">end_time</span></em>, <em class="sig-param"><span class="n">db_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/genipe/db/utils.html#mark_drmaa_task_completed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#genipe.db.utils.mark_drmaa_task_completed" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a task run by DRMAA as completed (while updating times).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the ID of the task</p></li>
<li><p><strong>launch_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the launch time (according to DRMAA)</p></li>
<li><p><strong>start_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the start time (according to DRMAA)</p></li>
<li><p><strong>end_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the end time (according to DRMAA)</p></li>
<li><p><strong>db_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the name of the DB (usually a file)</p></li>
</ul>
</dd>
</dl>
<p>The task entry is updated with the launch, start and end time. Those times
come from the DRMAA library. The launch time is the time at which the task
was launched to the scheduler. The start time correspond to the time that
the scheduler started the job on the cluster. Finally, the end time is the
time that the job was completed.</p>
</dd></dl>

<dl class="py function">
<dt id="genipe.db.utils.mark_task_completed">
<code class="sig-prename descclassname">genipe.db.utils.</code><code class="sig-name descname">mark_task_completed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task_id</span></em>, <em class="sig-param"><span class="n">db_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/genipe/db/utils.html#mark_task_completed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#genipe.db.utils.mark_task_completed" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks the task as completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the ID of the task</p></li>
<li><p><strong>db_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the name of the DB (usually a file)</p></li>
</ul>
</dd>
</dl>
<p>The task entry is modified so that <code class="docutils literal notranslate"><span class="pre">completed=1</span></code> and the end time is
updated to the current time.</p>
</dd></dl>

<dl class="py function">
<dt id="genipe.db.utils.mark_task_incomplete">
<code class="sig-prename descclassname">genipe.db.utils.</code><code class="sig-name descname">mark_task_incomplete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task_id</span></em>, <em class="sig-param"><span class="n">db_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/genipe/db/utils.html#mark_task_incomplete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#genipe.db.utils.mark_task_incomplete" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a task as incomplete.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the ID of the task</p></li>
<li><p><strong>db_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – the name of the DB (usually a file)</p></li>
</ul>
</dd>
</dl>
<p>The task entry is set as incomplete by updating the <code class="docutils literal notranslate"><span class="pre">completed</span></code> value to
<code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">genipe.db package</a><ul>
<li><a class="reference internal" href="#module-genipe.db">Module contents</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-genipe.db.utils">genipe.db.utils module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="genipe.config.html"
                        title="previous chapter">genipe.config package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="genipe.formats.html"
                        title="next chapter">genipe.formats package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/module_content/genipe.db.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="genipe.formats.html" title="genipe.formats package"
             >next</a> |</li>
        <li class="right" >
          <a href="genipe.config.html" title="genipe.config package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">genipe 1.5.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../implementation.html" >Implementation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="modules.html" >genipe</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="genipe.html" >genipe package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">genipe.db package</a></li> 
      </ul>
    </div>


    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Beaulieu-Saucier Pharmacogenomics Centre.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-81009922-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>
</html>